# AuroraUI 项目文档

### 项目名称

**AuroraUI** - 基于 Vue 3 的现代化 UI 组件库

### 项目定位

这是一个个人技能提升项目，旨在深入学习现代前端组件库开发的最佳实践，包括组件设计模式、测试策略、构建优化和工程化实践。

### 技术栈

- **框架**: Vue 3 (Composition API)
- **语言**: TypeScript
- **样式**: Tailwind CSS
- **构建工具**: Vite
- **测试框架**: Vitest + Vue Test Utils
- **组件基础**: Reka UI
- **包管理**: pnpm

### Reka UI(https://reka-ui.com/) 介绍

Reka UI 是一个基于 Vue 3 的 Headless UI 组件库，提供无样式的、可访问性优先的组件实现。它专注于组件的行为逻辑和可访问性，而不提供默认样式。它具有以下特性：

- **无样式设计** - 样式完全由开发者控制
- **可访问性优先** - 内置 ARIA 属性、键盘导航支持
- **TypeScript 支持** - 完整的类型定义
- **零运行时依赖** - 不依赖外部样式或 JavaScript 库

### 在 AuroraUI 中的应用

AuroraUI 基于 Reka UI 构建，采用 **Headless UI** 设计模式：

```vue
<script setup lang="ts">
import type { HTMLAttributes } from 'vue'
import { AvatarRoot } from 'reka-ui'
import { cn } from '@/utils/cn'

defineOptions({ name: 'AAvatar' })

const props = defineProps<{ class?: HTMLAttributes['class'] }>()

const basicClass = 'relative flex size-8 shrink-0 overflow-hidden rounded-full'
</script>

<template>
  <AvatarRoot data-slot="avatar" :class="cn(basicClass, props.class)">
    <slot />
  </AvatarRoot>
</template>
```

## 🎯 项目目标与价值

### 学习目标

1. **组件库架构设计** - 掌握可扩展、可复用的 Vue 组件设计模式
2. **TypeScript 集成** - 在 Vue 生态中实现类型安全的开发体验
3. **测试策略** - 建立完整的 UI 组件测试体系
4. **构建优化** - 学习现代构建工具和优化技术
5. **工程化实践** - 代码质量、CI/CD 和文档化

### 技术价值

- 深入理解 Vue 3 Composition API 和响应式系统
- 掌握 TypeScript 在组件库开发中的高级应用
- 学习现代前端工程化工具链的配置和优化
- 建立完整的测试驱动开发(TDD)工作流

## 目录结构

```
AuroraUI/
├── src/
│   ├── components/               # 组件实现
│   │   ├── accordion/            # 手风琴
│   │   ├── alert/                # 警告
│   │   ├── alert-dialog/         # 警告对话框
│   │   ├── aspect-ratio/         # 宽高比
│   │   ├── avatar/               # 头像
│   │   ├── badge/                # 徽标
│   │   ├── breadcrumb/           # 面包屑
│   │   ├── button/               # 按钮
│   │   ├── calendar/             # 日历
│   │   ├── card/                 # 卡片
│   │   ├── input/                # 输入框
│   │   ├── label/                # 标签
│   │   ├── textarea/             # 文本域
│   │   └── index.ts              # 统一导出
│   ├── utils/
│   ├── dev.ts
│   ├── DevApp.vue
│   ├── index.ts
│   └── style.css
├── examples/
├── tests/
├── scripts/
├── ...
└── README.md
```

### 设计理念

1. **组件化设计** - 每个组件独立开发、测试和文档化
2. **类型安全** - 全面的 TypeScript 类型定义
3. **可访问性优先** - 基于 Reka UI 的无样式、可访问性组件
4. **样式系统** - 使用 Tailwind CSS 和 CVA 实现变体系统
5. **测试驱动** - 完整的单元测试、组件测试和集成测试

## 🧩 核心组件实现

### 1. 组件变体系统

class-variance-authority 是一个用于创建类型安全的 CSS 类变体的库，让样式管理变得更加类型安全、可维护和高效。
使用 `class-variance-authority` 实现类型安全的样式变体：

```typescript
export const buttonVariants = cva('inline-flex items-center justify-center gap-2', {
  variants: {
    variant: {
      default: 'bg-primary text-primary-foreground shadow-xs hover:bg-primary/90',
      link: 'text-primary underline-offset-4 hover:underline',
      // ... 更多变体
    },
    size: {
      default: 'h-9 px-4 py-2 has-[>svg]:px-3',
      sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',
      lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',
    },
  },
  defaultVariants: {
    variant: 'default',
    size: 'default',
  },
})
```

### 2. 组件组合模式

采用 Headless UI 模式，分离逻辑和样式：

```vue
<script setup lang="ts">
import { AccordionRoot, useForwardPropsEmits, type AccordionRootEmits, type AccordionRootProps } from 'reka-ui'

defineOptions({ name: 'AAccordion' })

const props = defineProps<AccordionRootProps>()
const emits = defineEmits<AccordionRootEmits>()

const forwarded = useForwardPropsEmits(props, emits)
</script>

<template>
  <AccordionRoot data-slot="accordion" v-bind="forwarded">
    <slot />
  </AccordionRoot>
</template>
```

### 3. 类型安全

完整的 TypeScript 类型定义和导出：

```typescript
export type ButtonVariants = VariantProps<typeof buttonVariants>

interface Props extends PrimitiveProps {
  variant?: ButtonVariants['variant']
  size?: ButtonVariants['size']
  class?: HTMLAttributes['class']
}
```

## 🧪 测试

### 策略

1. **单元测试** - 测试工具函数和组件基础功能
2. **组件测试** - 测试组件渲染、交互和状态管理
3. **集成测试** - 测试组件组合使用和复杂交互
4. **可访问性测试** - 确保组件符合可访问性标准

### 示例

```typescript
describe('Accordion Integration', () => {
  it('renders complete accordion structure correctly', () => {
    render({
      components: { Accordion, AccordionItem, AccordionTrigger, AccordionContent },
      template: `
        <Accordion :defaultValue="['item-1', 'item-2']">
            <AccordionItem value="item-1">
                <AccordionTrigger>Section 1</AccordionTrigger>
                <AccordionContent>Content for section 1</AccordionContent>
            </AccordionItem>
        </Accordion>
      `,
    })

    const accordion = document.querySelector('[data-slot="accordion"]')
    expect(accordion).toBeInTheDocument()
    // ...
  })
})
```

## 🚀 构建与发布

### 构建配置

使用 Vite 实现多格式构建：

```typescript
export default defineConfig(({ command, mode }) => {
  const isLibrary = process.env.BUILD_LIB === 'true'

  if (isLibrary) {
    return {
      build: {
        lib: {
          entry: path.resolve(__dirname, 'src/index.ts'),
          name: 'AuroraUIPlus',
          fileName: (format) => `aurora-ui-plus.${format}.js`,
          formats: ['es', 'umd'],
        },
        rollupOptions: {
          external: ['vue'],
          output: {
            globals: { vue: 'Vue' },
            assetFileNames: (assetInfo) => {
              if (assetInfo.name && assetInfo.name.endsWith('.css')) {
                return 'style.css'
              }
              return assetInfo.name || 'assets/[name].[ext]'
            },
          },
        },
      },
    }
  }
})
```

### 输出格式

- **ES 模块**: `aurora-ui-plus.es.js`
- **UMD 格式**: `aurora-ui-plus.umd.js`
- **样式文件**: `style.css`
- **类型声明**: `index.d.ts`

## 🛠️ 开发工具链

### 代码质量

- **ESLint** - 代码规范和错误检查
- **Prettier** - 代码格式化
- **TypeScript** - 类型检查

### 开发体验

- **热重载** - Vite 开发服务器
- **类型提示** - 完整的 TypeScript 支持
- **组件自动导入** - unplugin-vue-components
- **开发工具** - Vue DevTools 集成

### 测试工具

- **Vitest** - 快速单元测试
- **Vue Test Utils** - Vue 组件测试
- **Testing Library** - 用户行为测试
- **Coverage** - 测试覆盖率报告

## 📈 项目成果

### 技术成果

1. **完整的组件库** - 多个生产级组件
2. **100% 测试覆盖率** - 多个测试用例
3. **类型安全** - 完整的 TypeScript 集成
4. **现代化构建** - 支持 ES 模块和 UMD 格式

### 学习成果

1. **Vue 3 深度应用** - Composition API、响应式系统、组件设计
2. **TypeScript 高级特性** - 泛型、类型推导、模块声明
3. **现代构建工具** - Vite、Rollup、ESBuild 配置和优化
4. **测试驱动开发** - 单元测试、集成测试、E2E(End-to-End) 测试
5. **工程化实践** - 代码规范、CI/CD、文档化

### 项目亮点

- **零运行时依赖** - 基于 Reka UI 的无样式组件
- **Tree Shaking** - 支持按需导入，减少包体积
- **类型安全** - 完整的 TypeScript 类型定义
- **测试完备** - 100% 组件测试覆盖率
- **文档完善** - 详细的 API 文档和使用示例

## 🔮 规划

### 短期目标

1. **组件扩展** - 添加更多常用组件
2. **主题系统** - 实现完整的主题定制系统

### 长期目标

1. **文档站点** - 使用 VitePress 构建完整的文档网站
2. **性能优化** - 虚拟滚动、懒加载等性能优化
3. **动画系统** - 添加过渡动画和微交互

## 💡 技术总结

### 核心收获

1. **组件设计模式** - 掌握了 Headless UI、Compound Component 等设计模式
2. **类型系统** - 深入理解了 TypeScript 在大型项目中的应用
3. **测试策略** - 建立了完整的测试体系和最佳实践
4. **工程化** - 掌握了现代前端工程化工具链的配置和优化

### 技术难点

1. **类型推导** - 实现复杂的组件变体类型推导
2. **测试策略** - 平衡测试覆盖率和测试维护成本
3. **构建优化** - 实现多格式输出和 Tree Shaking

---

## 🎓 总结

AuroraUI 项目是一个全面的技能提升项目，通过构建一个现代化的 Vue 3 组件库，深入学习了现代前端开发的核心技术和最佳实践。项目不仅实现了功能完整的组件库，更重要的是建立了完整的开发工作流和工程化体系，为后续的前端开发工作奠定了坚实的基础。
